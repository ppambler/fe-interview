| âœï¸ Tangxt | â³ 2020-06-23 | ğŸ·ï¸ JS |

# 1~10

## 1ã€ä½ ä»¥ä¸ºå‡½æ•°è°ƒç”¨æ‰§è¡Œå°±åªä¼šåˆ›å»ºä¸€ä¸ªç§æœ‰ä¸Šä¸‹æ–‡å—ï¼Ÿ

æœ‰è¿™ä¹ˆä¸¤æ®µä»£ç ï¼š

``` js
var x = 1
function func(x,y=function anonymous1(){x=2}) {
    x = 3
    y()
    console.log(x)
}

func(5)
console.log(x)
```

``` js
var x = 1
function func(x,y=function anonymous1(){x=2}) {
    var x = 3
    y()
    console.log(x)
}

func(5)
console.log(x)
```

è¯·é—®ï¼Œå„è‡ªçš„ç»“æœæ˜¯å•¥ï¼Ÿ

ç»“æœæ˜¯ï¼š

``` js
2 1
3 1
```

å¯ï¼Œä¸ºå•¥ä¼šæ˜¯è¿™æ ·çš„ç»“æœå‘¢ï¼Ÿå‰è€…ä»…ä»…åªæ˜¯æ¯”åè€…å¤šäº†ä¸€ä¸ª`var`å‘€ï¼

ç¬¬ä¸€æ®µä»£ç çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š

1. ECStack
2. EC(G)
   1. VO(G)
      1. x -> 1
      2. func -> 0x101ï¼š`[[scope]] -> EC(G)` + `å½¢å‚x,y` + `å‡½æ•°ä½“ä»£ç å­—ç¬¦ä¸²`
   2. ä»£ç æ‰§è¡Œ
      1. `func(5)`
         1. AO(func)
            1. x -> 5 -> **3** -> **2**
            2. y -> 0x102ï¼š`[[scope]] -> EC(func)`+`'x=2'`
            3. arguments -> `{0:5}`ï¼ˆ`y=xxx`è¿™ä¸ªé»˜è®¤å€¼å¯ä¸ç®—æ•°å“ˆï¼ï¼‰
            4. scopeChain -> `<EC(func),EC(G)>`
            5. this -> `window`
         2. `x = 3` -> æŠŠ`AO(func)`ä¸‹çš„`x`æ”¹ä¸º`3`
         3. `y()`
            1. AO(anonymous1)
               1. arguments -> `{}`
               2. this -> `window`
               3. scopeChain -> `<EC(anonymous1),EC(func)>`
            2. `x = 2` -> é¡ºç€ä½œç”¨åŸŸé“¾å¾€ä¸Šæ‰¾ -> æŠŠ`AO(func)`ä¸‹çš„`x`æ”¹ä¸º`2`
            3. `return undefined`
            4. é‡Šæ”¾å†…å­˜
         4. `console.log(x)` -> 2
         5. `return undefined`
         6. é‡Šæ”¾å†…å­˜
      2. `console.log(x)` -> æ‰¾åˆ°å…¨å±€å˜é‡`x` -> 1
   3. ä»£ç æ‰§è¡Œå®Œæ¯•
3. â€¦â€¦

æ‰€ä»¥ç»“æœæ˜¯`2ã€1`

é‚£ä¹ˆç¬¬äºŒæ®µä»£ç å‘¢ï¼Ÿ

æˆ‘ä»¬çŸ¥é“åœ¨ES6ä¸­å­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œå³åªè¦åœ¨`{}`é‡Œè¾¹å˜å‡ºç°`let/const/function`å°±ä¼šå½¢æˆæ‰€è°“çš„å—çº§ä½œç”¨åŸŸï¼Œä¹Ÿå°±å—çº§ä¸Šä¸‹æ–‡ï¼Œå½“ç„¶ï¼Œå¯¹è±¡çš„`{}`é™¤å¤–â€¦â€¦

ç„¶è€Œï¼Œé™¤äº†ä¸Šè¿°æ‰€è¯´çš„è¿™ç§æƒ…å†µä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µä¹Ÿä¼šäº§ç”Ÿï¼Œè€Œè¿™æ˜¯å¾ˆå¤šäººéƒ½ä¸æ™“å¾—çš„ï¼

è¿™ç§æƒ…å†µçš„äº§ç”Ÿï¼Œéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼š

1. å‡½æ•°æœ‰å½¢å‚èµ‹å€¼äº†é»˜è®¤å€¼ -> å³ä½ åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå…¶å½¢å‚è‡³å°‘å‡ºç°ä¸€æ¬¡ï¼Œå¦‚`x = xxxx`è¿™ç§å½¢å‚èµ‹å€¼â€¦â€¦ -> åªæœ‰ä¸€è¡Œç±»ä¼¼`x = 10`è¿™æ ·çš„ä»£ç å°±è¡Œäº†ï¼Œå³ä¾¿APIè°ƒç”¨ä»”åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™æ²¡æœ‰ç»™`x`ä¼ å‚æ•°
2. å‡½æ•°ä½“ä¸­æœ‰å•ç‹¬å£°æ˜è¿‡æŸä¸ªå˜é‡ -> ç”¨`var/let/const/function`éƒ½è¡Œï¼Œä¸è¿‡ï¼Œä½ å¾—æ³¨æ„ï¼Œletå£°æ˜çš„å˜é‡ï¼Œå¯ä¸èƒ½ä¸å½¢å‚å˜é‡åé‡åï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼

æ¡ä»¶æˆç«‹çš„è¯ï¼Œé‚£ä¹ˆåœ¨å‡½æ•°è¿è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šäº§ç”Ÿä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªä½œç”¨åŸŸï¼š

1. ç¬¬ä¸€ä¸ªï¼šå‡½æ•°æ‰§è¡Œå½¢æˆçš„ç§æœ‰ä¸Šä¸‹æ–‡ -> å…¶ä¸­æœ‰ä½œç”¨åŸŸé“¾ã€å½¢å‚èµ‹å€¼â€¦â€¦
2. ç¬¬äºŒä¸ªï¼šå‡½æ•°ä½“å¤§æ‹¬å·åŒ…èµ·æ¥çš„æ˜¯ä¸€ä¸ªå—çº§ä¸Šä¸‹æ–‡ï¼ˆ`EC(block)`ï¼‰

> è¿™ä¸ªçŸ¥è¯†ç‚¹å¾ˆé‡è¦ï¼šå› ä¸ºæˆ‘ä»¬çš„ä»£ç ç»å¸¸ä¼šè¿™æ ·å†™ï¼Œå³ä½ ä¼šç”¨å½¢å‚èµ‹å€¼+å‡½æ•°ä½“ä¸­å£°æ˜å˜é‡ï¼Œå¦‚æœå‡ºäº†bugçš„è¯ï¼Œä½ ä¸äº†è§£æ•´ä¸ªæ‰§è¡Œè¿‡çš„è¯ï¼Œé‚£ä¹ˆä½ æ˜¯ä¸ä¼šä¿®å¤å®ƒçš„ï¼

æ‰€ä»¥å¯æœ‰ï¼š

![ç§æœ‰ä¸Šä¸‹æ–‡å’Œå—çº§ä¸Šä¸‹æ–‡](assets/img/2020-06-23-18-17-09.png)

> ä½ å¯ä»¥é€šè¿‡debuggeræ ¡éªŒä¸€ä¸‹

![debugger](assets/img/2020-06-23-18-31-39.png)










